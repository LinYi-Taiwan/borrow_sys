(function(t){function e(e){for(var a,o,r=e[0],c=e[1],l=e[2],d=0,m=[];d<r.length;d++)o=r[d],Object.prototype.hasOwnProperty.call(i,o)&&i[o]&&m.push(i[o][0]),i[o]=0;for(a in c)Object.prototype.hasOwnProperty.call(c,a)&&(t[a]=c[a]);u&&u(e);while(m.length)m.shift()();return n.push.apply(n,l||[]),s()}function s(){for(var t,e=0;e<n.length;e++){for(var s=n[e],a=!0,r=1;r<s.length;r++){var c=s[r];0!==i[c]&&(a=!1)}a&&(n.splice(e--,1),t=o(o.s=s[0]))}return t}var a={},i={app:0},n=[];function o(e){if(a[e])return a[e].exports;var s=a[e]={i:e,l:!1,exports:{}};return t[e].call(s.exports,s,s.exports,o),s.l=!0,s.exports}o.m=t,o.c=a,o.d=function(t,e,s){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(o.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)o.d(s,a,function(e){return t[e]}.bind(null,a));return s},o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],c=r.push.bind(r);r.push=e,r=r.slice();for(var l=0;l<r.length;l++)e(r[l]);var u=c;n.push([0,"chunk-vendors"]),s()})({0:function(t,e,s){t.exports=s("56d7")},"034f":function(t,e,s){"use strict";s("85ec")},"0448":function(t,e,s){t.exports=s.p+"img/step4.3967a7b7.png"},"080e":function(t,e,s){},"14a9":function(t,e,s){"use strict";s("860e")},"386c":function(t,e,s){"use strict";s("ea8c")},"3aff":function(t,e,s){"use strict";s("8f74")},"434c":function(t,e,s){},"4b94":function(t,e,s){},"56d7":function(t,e,s){"use strict";s.r(e);s("45fc"),s("e260"),s("e6cf"),s("cca6"),s("a79d");var a=s("2b0e"),i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"app"}},[s("div",{directives:[{name:"show",rawName:"v-show",value:!0===t.$store.state.room.showQuestion,expression:"$store.state.room.showQuestion === true"}],staticClass:"modal-box slide-top"},[s("introduction")],1),""+this.$route.name!=="login"?s("sideBar"):t._e(),""+this.$route.name!=="login"&&!1===t.$store.state.room.isLoading?s("myNav"):t._e(),!0===t.$store.state.room.isLoading?s("loading",{staticClass:"loading-component"}):t._e(),s("router-view",{directives:[{name:"show",rawName:"v-show",value:!1===t.$store.state.room.isLoading,expression:"$store.state.room.isLoading === false"}],staticClass:"router-view"}),""+this.$route.name==="login"?s("footer",[s("div",[t._v("© 國立東華大學諮商與臨床心理學系｜教室借用系統｜NDHUCCP")])]):t._e()],1)},n=[],o=s("bc3a"),r=s.n(o),c=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},l=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"logo-home"},[a("img",{staticClass:"white-logo",attrs:{src:s("5e72"),alt:"img"}}),a("div",{staticClass:"title-box"},[a("div",{staticClass:"title-up"},[t._v("諮商與臨床心理學系")]),a("div",{staticClass:"title-down"},[t._v("教室借用系統")])])])}],u={name:"test"},d=u,m=(s("633d"),s("2877")),h=Object(m["a"])(d,c,l,!1,null,"670d55fa",null),v=h.exports,_=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{class:{sideBar:t.showBar}},[t.showQuestion?s("introduction"):t._e(),s("div",{directives:[{name:"show",rawName:"v-show",value:!t.showBar,expression:"!showBar"}],staticClass:"mobile-selection",on:{click:function(e){return t.mobileShowBar()}}}),s("div",{staticClass:"nav",style:t.mobileBar_style},[s("div",{staticClass:"mobile-selection-cancel",class:{invisible:!t.showBar},on:{click:function(e){return t.mobileShowBar()}}}),s("div",{staticClass:"sideBar-up",on:{click:function(e){return t.mobileShowBar()}}},[s("router-link",{attrs:{to:"/home"}},[s("div",{staticClass:"router-container"},[s("div",{staticClass:"home"}),s("div",[t._v("主頁")])])]),s("router-link",{attrs:{to:"/allRooms"}},[s("div",{staticClass:"router-container"},[s("div",{staticClass:"key"}),s("div",[t._v("教室借用")])])])],1),s("div",{staticClass:"sideBar-down",on:{click:function(e){return t.mobileShowBar()}}},[s("a",{on:{click:function(e){return t.logout()}}},[t._m(0)]),s("a",{on:{click:function(e){return t.question()}}},[t._m(1)])])]),s("div",{directives:[{name:"show",rawName:"v-show",value:t.showBar,expression:"showBar"}],staticClass:"mask",on:{click:function(e){return t.mobileShowBar()}}})],1)},f=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"router-container"},[s("div",{staticClass:"logout"}),s("div",[t._v("系統登出")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"router-container"},[s("div",{staticClass:"question"}),s("div",[t._v("借用流程")])])}],p=s("5530"),g=s("2f62"),b=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"background-canvas"},["phone"===t.$store.state.room.device?a("div",{staticClass:"title-box"},[t._m(0),a("img",{staticClass:"cancel",attrs:{src:s("f687"),alt:""},on:{click:function(e){return t.showQuestion()}}})]):t._e(),"pc"===t.$store.state.room.device?a("img",{staticClass:"cancel",attrs:{src:s("f687"),alt:""},on:{click:function(e){return t.showQuestion()}}}):t._e(),"phone"===t.$store.state.room.device?a("div",{staticClass:"progress"},[a("div",{staticClass:"step",class:{"current-page-step":0===this.touch.step}},[t._v("1")]),a("div",{staticClass:"step-line"}),a("div",{staticClass:"step",class:{"current-page-step":1===this.touch.step}},[t._v("2")]),a("div",{staticClass:"step-line"}),a("div",{staticClass:"step",class:{"current-page-step":2===this.touch.step}},[t._v("3")]),a("div",{staticClass:"step-line"}),a("div",{staticClass:"step",class:{"current-page-step":3===this.touch.step}},[t._v("4")])]):t._e(),a("div",{staticClass:"modal-wrap",style:t.listPositionMove},[t._m(1),a("div",{staticClass:"progression-line"}),t._m(2)]),a("div",{staticClass:"ellipse-box"},[a("div",{staticClass:"change-page-ellipse",class:{"current-page-ellipse":0===this.touch.step}}),a("div",{staticClass:"change-page-ellipse",class:{"current-page-ellipse":1===this.touch.step}}),a("div",{staticClass:"change-page-ellipse",class:{"current-page-ellipse":2===this.touch.step}}),a("div",{staticClass:"change-page-ellipse",class:{"current-page-ellipse":3===this.touch.step}})])])},w=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"title"},[s("div",{staticClass:"question"}),s("div",{staticClass:"title-text"},[t._v("系統使用說明")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"picture-box"},[a("img",{staticClass:"picture",attrs:{src:s("e145"),alt:""}}),a("img",{staticClass:"picture",attrs:{src:s("ce2a"),alt:""}}),a("img",{staticClass:"picture",attrs:{src:s("f1bc"),alt:""}}),a("img",{staticClass:"picture",attrs:{src:s("0448"),alt:""}})])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"text-box"},[s("div",{staticClass:"description-box"},[s("div",{staticClass:"description-title"},[t._v("確認人數")]),s("div",{staticClass:"description-content"},[t._v("確認會共同使用教室的人數是否大於20人。")])]),s("div",{staticClass:"description-box"},[s("div",{staticClass:"description-title"},[t._v("選擇教室")]),s("div",{staticClass:"description-content"},[t._v("確認後，選擇符合使用需求的教室。")])]),s("div",{staticClass:"description-box"},[s("div",{staticClass:"description-title"},[t._v("選取時間")]),s("div",{staticClass:"description-content"},[t._v(" 請選取欲借用日期，挑選借用時間，並在填上借用事由後送出申請。 ")])]),s("div",{staticClass:"description-box"},[s("div",{staticClass:"description-title"},[t._v("完成借用！")]),s("div",{staticClass:"description-content"},[t._v("送出申請後，可至借用紀錄頁面檢視，並在需要時編輯借用申請。")])])])}],C={name:"introduction",data:function(){return{listPositionMove:{transform:""},touch:{startX:0,endX:0,step:0,distance:0}}},created:function(){},computed:{},methods:{showQuestion:function(){this.$store.state.room.showQuestion=!1},touchstart:function(t){this.touch.startX=t.touches[0].clientX,this.touch.endX=0},touchmove:function(t){this.touch.endX=t.touches[0].clientX},touchend:function(){if(0!==this.touch.endX)if(this.touch.endX-this.touch.startX>0&&0!==this.touch.step)this.touch.step=this.touch.step-1,this.listPositionMove.transform="translateX(-"+parseInt(77.5*this.touch.step)+"vw)";else{if(!(this.touch.endX-this.touch.startX<0&&3!==this.touch.step))return this.touch.startX=0,void(this.touch.endX=0);this.touch.step=this.touch.step+1,this.listPositionMove.transform="translateX(-"+parseInt(77.5*this.touch.step)+"vw)"}}},mounted:function(){var t=this;this.$el.addEventListener("touchstart",(function(e){return t.touchstart(e)})),this.$el.addEventListener("touchmove",(function(e){return t.touchmove(e)})),this.$el.addEventListener("touchend",(function(){return t.touchend()}))}},x=C,k=(s("f1dd"),Object(m["a"])(x,b,w,!1,null,"254b16be",null)),y=k.exports,D={name:"SideBar",components:{introduction:y},data:function(){return{showQuestion:!1,showBar:!1,mobileBar_style:{}}},created:function(){window.innerWidth<=1024&&(this.mobileBar_style={visibility:"hidden",width:"0"})},methods:Object(p["a"])(Object(p["a"])({},Object(g["b"])(["logout"])),{},{question:function(){this.$store.state.room.showQuestion=!this.$store.state.room.showQuestion},mobileShowBar:function(){"phone"===this.$store.state.room.device&&(this.showBar=!this.showBar,!1===this.showBar?(this.mobileBar_style.visibility="hidden")&&(this.mobileBar_style.width="0"):(this.mobileBar_style.visibility="visible")&&(this.mobileBar_style.width="50vw"))}}),computed:{device:function(){return this.$store.state.room.device}},watch:{device:function(){this.mobileBar_style={}}},mounted:function(){}},$=D,O=(s("386c"),Object(m["a"])($,_,f,!1,null,"b1a02186",null)),j=O.exports,S=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},R=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"loading-box"},[s("div",{staticClass:"loading-edge"},[s("div",{staticClass:"loading-logo"})]),s("div",{staticClass:"loading-text"},[t._v("LOADING")])])}],E={name:"loading"},B=E,L=(s("602e"),Object(m["a"])(B,S,R,!1,null,"3ee707ef",null)),M=L.exports,T={name:"App",components:{myNav:v,sideBar:j,loading:M,introduction:y},data:function(){return{router_name:null}},created:function(){window.innerWidth<1024?this.$store.state.room.device="phone":this.$store.state.room.device="pc"},computed:{watch_question_modal:function(){return this.$store.state.room.showQuestion}},watch:{watch_question_modal:function(){!0===this.$store.state.room.showQuestion?document.body.style.overflow="hidden":document.body.style.overflow="auto"}},mounted:function(){var t=this;window.onresize=function(){return function(){window.innerWidth<1024?t.$store.state.room.device="phone":t.$store.state.room.device="pc"}()}}},N=T,P=(s("034f"),Object(m["a"])(N,i,n,!1,null,null,null)),F=P.exports,I=s("8c4f"),X=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"room"},[a("div",{staticClass:"content"},[a("Calendar"),a("div",{staticClass:"right"},[a("div",{staticClass:"up"},[a("div",{staticClass:"select-time"},[t._v(" "+t._s(this.$store.state.room.selectTime)+" ")]),a("div",{staticClass:"select"},[a("div",{staticClass:"select-label"},[t._v("開始時間")]),a("select",{directives:[{name:"model",rawName:"v-model",value:t.start_time,expression:"start_time"}],attrs:{name:"start_select",id:"start_select"},on:{change:function(e){var s=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.start_time=e.target.multiple?s:s[0]}}},t._l(t.start_time_options,(function(e){return a("option",{key:e.time+"start",domProps:{value:e}},[t._v(t._s(e.time))])})),0)]),a("div",{staticClass:"select"},[a("div",{staticClass:"select-label"},[t._v("結束時間")]),a("select",{directives:[{name:"model",rawName:"v-model",value:t.end_time,expression:"end_time"}],attrs:{name:"end_select",id:"end_select"},on:{change:function(e){var s=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.end_time=e.target.multiple?s:s[0]}}},t._l(t.end_time_options,(function(e){return a("option",{key:e.time+"end",domProps:{value:e}},[t._v(t._s(e.time))])})),0)])]),a("div",{staticClass:"mid"},[t._m(0),a("div",{ref:"square",staticClass:"square-box"},t._l(t.time_interval,(function(e){return a("div",{key:e.id+"time_interval",staticClass:"time-square",class:{disable:!0===e.is_borrowed,is_select:e.is_select}},[e.id%2===0?a("div",{staticClass:"clock"},[t._v(t._s(e.id/2))]):t._e()])})),0)]),a("div",{staticClass:"textarea-box"},[a("div",{staticClass:"borrow-reason"},[t._v(" 借用事由 ")]),a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.borrow_reason,expression:"borrow_reason"}],attrs:{type:"text",maxlength:"30",placeholder:"字數上限為30字..."},domProps:{value:t.borrow_reason},on:{input:function(e){e.target.composing||(t.borrow_reason=e.target.value)}}})]),a("div",{staticClass:"submit-box"},[a("div",{staticClass:"submit",on:{click:function(e){return t.submit()}}},[t._v(" 申請借用 ")])]),a("div")])],1),t.show_alert?a("div",{staticClass:"modal-box"},[a("div",{staticClass:"alert-modal"},[a("img",{staticClass:"cancel",attrs:{src:s("f687"),alt:""},on:{click:function(e){t.show_alert=!1}}}),a("div",{staticClass:"alert-content"},[a("div",{staticClass:"alert-title"},[t._v("以下是您即將借用的教室資訊：")]),a("div",{staticClass:"alert-text"},[t._v("借用教室："+t._s(this.$route.params.id))]),a("div",{staticClass:"alert-text"},[t._v("借用日期："+t._s(this.$store.state.room.selectTime))]),a("div",{staticClass:"alert-text"},[t._v("借用時段："+t._s(t.start_time.time)+"~"+t._s(t.end_time.time))]),a("div",{staticClass:"check-submit",on:{click:function(e){t.create_new_borrow({start_time:t.start_time,end_time:t.end_time,borrow_room:t.$route.params.id,borrower:t.$store.state.room.tokens.user_email,borrow_reason:t.borrow_reason,date:t.$store.state.room.selectTime}),t.show_alert=!1}}},[t._v(" 確定借用！ ")])])])]):t._e()])},Q=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"description-field"},[s("div",{staticClass:"gray-block"}),s("div",{staticClass:"description"},[t._v("此空間已借用/超出時間")])])}],q=(s("99af"),s("4de4"),s("7db0"),s("4160"),s("a15b"),s("fb6a"),s("b0c0"),s("d3b7"),s("ac1f"),s("25f0"),s("843c"),s("1276"),s("159b"),s("b85c")),A=(s("96cf"),s("1da1")),H=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",{staticClass:"page-title"},[t._v(t._s(this.$route.params.id))]),s("div",{staticClass:"box"},[s("div",{staticClass:"calendar"},[s("div",{staticClass:"calendar-nav"},[t.preMonthDisabled?t._e():s("div",{staticClass:"change-page"}),t.preMonthDisabled?s("div",{staticClass:"change-page last-page",on:{click:function(e){return t.preMonth()}}}):t._e(),s("div",{staticClass:"nav-button"},[t._v(t._s(t.currentDate.month)+"月,"+t._s(t.currentDate.year))]),s("div",{staticClass:"change-page next-page",on:{click:function(e){return t.nextMonth()}}})]),s("div",{staticClass:"line"}),s("div",{staticClass:"weekday-box"},t._l(t.weekdays,(function(e){return s("div",{key:e,staticClass:"weekday weekday-margin"},[t._v(" "+t._s(e)+" ")])})),0),s("div",{staticClass:"day-box"},[t._l(t.monthFirstDay-1,(function(t){return s("div",{key:"pre"+t,staticClass:"day hidden"})})),t._l(t.currentMonthDay,(function(e){return s("div",{key:"currentMonthDay"+String(e),ref:String(t.currentDate.year)+String(t.currentDate.month)+String(e),refInFor:!0,staticClass:"day",class:{disable:t.dayDisable(e)},on:{click:function(s){return t.clickOn(e)}}},[t._v(" "+t._s(e)+" ")])}))],2)])])])},K=[],W={name:"calendar",data:function(){return{weekdays:["一","二","三","四","五","六","日"],currentDate:{date:0,month:0,year:0},test:10,targetDay:""}},created:function(){var t=new Date;this.currentDate.date=t.getDate(),this.currentDate.month=t.getMonth()+1,this.currentDate.year=t.getFullYear(),this.targetDay=String(this.currentDate.year)+String(this.currentDate.month)+String(this.currentDate.date),this.makeCurrentDate()},mounted:function(){this.$refs[this.targetDay][0].classList.add("click-on")},computed:{currentMonthDay:function(){return new Date(this.currentDate.year,this.currentDate.month,0).getDate()},preMonthDay:function(){var t=0===this.currentDate.month?this.currentDate.year-1:this.currentDate.year,e=0===this.currentDate.month?12:this.currentDate.month;return new Date(t,e,0).getDate()},monthFirstDay:function(){var t=new Date(this.currentDate.year,this.currentDate.month-1,1).getDay();return 0===t?7:t},preMonthDisabled:function(){var t=new Date,e=t.getFullYear(),s=t.getMonth()+1;t.getDate();return!(this.currentDate.year<=e&&this.currentDate.month===s)}},methods:{makeCurrentDate:function(){this.$store.state.room.selectTime=[String(this.currentDate.year),String(this.currentDate.month),String(this.currentDate.date)].join("-")},clickOn:function(t){var e=new Date;t<e.getDate()&&e.getFullYear()===this.currentDate.year&&e.getMonth()+1===this.currentDate.month||(this.removeClass(),this.currentDate.date=t,console.log(this.currentDate),this.targetDay=String(this.currentDate.year)+String(this.currentDate.month)+String(this.currentDate.date),this.$refs[this.targetDay][0].classList.add("click-on"),this.makeCurrentDate())},preMonth:function(){this.removeClass(),this.currentDate.month=this.currentDate.month-1,this.targetDay="",0===this.currentDate.month?this.adjustDate("pre"):this.currentDate.year},nextMonth:function(){this.removeClass(),this.currentDate.month=this.currentDate.month+1,this.targetDay="",13===this.currentDate.month?this.adjustDate("next"):this.currentDate.year},removeClass:function(){""!==this.targetDay&&this.$refs[this.targetDay][0].classList.remove("click-on")},adjustDate:function(t){"pre"===t?(this.currentDate.year=this.currentDate.year-1,this.currentDate.month=12):"next"===t&&(this.currentDate.year=this.currentDate.year+1,this.currentDate.month=1)},dayDisable:function(t){var e=new Date,s=e.getFullYear(),a=e.getMonth()+1,i=e.getDate();return i>t&&this.currentDate.month===a&&this.currentDate.year===s}}},G=W,J=(s("14a9"),Object(m["a"])(G,H,K,!1,null,"3640cbdc",null)),Y=J.exports,U={name:"room",components:{Calendar:Y},data:function(){return{start_time:{},end_time:{},room_data:[],borrow_reason:"",time_interval:[],show_alert:!1,target_data:{}}},created:function(){var t=this;return Object(A["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.watchRouter(),t.$store.state.room.isLoading=!0,e.next=4,t.get_room_data(t.$route.params.id);case 4:t.room_data=t.$store.state.roomData,t.createTimeInterval(),t.$store.state.room.isLoading=!1;case 7:case"end":return e.stop()}}),e)})))()},computed:{watch_router:function(){return this.$route.params.id},get_data_by_day:function(){var t=this;return this.createTimeInterval(),this.room_data.filter((function(e){return e.start_time.split("T")[0]===t.$store.state.room.selectTime}))},start_time_options:function(){return this.time_interval.filter((function(t){return!0!==t.is_borrowed}))},end_time_options:function(){if(void 0!==this.start_time.id){var t=[];47===this.start_time.id&&!1===this.start_time.is_borrowed&&t.push({id:48,time:"23:59"});var e,s=Object(q["a"])(this.time_interval.slice(this.start_time.id+1));try{for(s.s();!(e=s.n()).done;){var a=e.value;if(t.push(a),47===a.id&&!1===a.is_borrowed&&t.push({id:48,time:"23:59"}),!0===a.is_borrowed)return t}}catch(i){s.e(i)}finally{s.f()}return t}},watch_start_end_time:function(){return this.start_time,this.end_time},watch_select_time:function(){return this.$store.state.room.selectTime,this.room_data}},watch:{watch_router:function(){this.watchRouter()},watch_select_time:function(){var t=this;this.createTimeInterval();var e="",s="",a="";(new Date).getHours();this.get_data_by_day.forEach((function(i){e=(new Date(i.end_time).getTime()-new Date(i.start_time).getTime())/1e3/60/30,s="".concat(new Date(i.start_time).getHours(),":").concat(new Date(i.start_time).getMinutes().toString().padEnd(2,0)),a=t.time_interval.filter((function(t){return t.time===s}));for(var n=a[0].id;n<a[0].id+e;n++)t.time_interval[n].is_borrowed=!0}))},watch_start_end_time:function(){if(void 0!==this.end_time.id){this.time_interval.forEach((function(t){return t.is_select=!1}));var t,e=this.time_interval.slice(this.start_time.id,this.end_time.id),s=Object(q["a"])(e);try{for(s.s();!(t=s.n()).done;){var a=t.value;if(!0===a.is_borrowed)return this.time_interval.forEach((function(t){return t.is_select=!1})),void(this.end_time={})}}catch(i){s.e(i)}finally{s.f()}this.time_interval.slice(this.start_time.id,this.end_time.id).forEach((function(t){return t.is_select=!0}))}}},methods:Object(p["a"])(Object(p["a"])({},Object(g["b"])(["get_room_data","create_new_borrow"])),{},{createTimeInterval:function(){for(var t=[],e=0;e<24;e++)for(var s=0;s<2;s++)0===s?t.push({id:t.length,time:"".concat(e,":").concat(30*s,"0"),is_borrowed:this.filterIsOverdue(e,s),is_select:!1}):t.push({id:t.length,time:"".concat(e,":").concat(30*s),is_borrowed:this.filterIsOverdue(e,s),is_select:!1});this.time_interval=t},filterIsOverdue:function(t,e){var s=new Date,a=[s.getFullYear(),s.getMonth()+1,s.getDate()].join("-");return this.$store.state.room.selectTime===a&&t<=s.getHours()&&!(t===s.getHours()&&30*e>=s.getMinutes())},submit:function(){return void 0===this.start_time.id?alert("尚未選擇起始時間"):void 0===this.end_time.id?alert("尚未選擇結束時間"):""===this.borrow_reason?alert("請輸入借用原因"):void(this.show_alert=!this.show_alert)},watchRouter:function(){var t=this,e=this.$store.state.room.roomPage.find((function(e){return e.name===t.watch_router}));console.log(this.watch_router),void 0===e&&(this.get_room_data(this.watch_router),Ht.push("/allRooms/".concat(this.watch_router)))}})},z=U,V=(s("9bbc"),Object(m["a"])(z,X,Q,!1,null,"63e43b0d",null)),Z=V.exports,tt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{directives:[{name:"show",rawName:"v-show",value:t.delete_alert,expression:"delete_alert"}],staticClass:"modal-box slide-top"},[a("div",{staticClass:"alert-modal"},[a("img",{staticClass:"cancel",attrs:{src:s("f687"),alt:""},on:{click:function(e){t.delete_alert=!1}}}),a("div",{staticClass:"alert-content"},[a("div",{staticClass:"alert-title"},[t._v(t._s(t.select_room_info.name))]),a("div",{staticClass:"img-box"},t._l(6,(function(t){return a("img",{key:t,staticClass:"room-img",attrs:{src:s("f5d1"),alt:""}})})),0),t._m(0)])])]),a("div",{staticClass:"page"}),a("div",{staticClass:"contain"},t._l(t.room_page,(function(e,s){return a("div",{key:s,staticClass:"room-box"},[a("div",{staticClass:"box",on:{click:function(a){return t.openButton(e.name+s)}}},[a("div",{staticClass:"room-text"},[a("div",{staticClass:"room-svg"}),a("div",{staticClass:"room-name"},[t._v(t._s(e.name))]),a("div",{staticClass:"room-describe"},[t._v("地點："+t._s(e.location))]),a("div",{staticClass:"room-describe"},[t._v("可容納人數："+t._s(e.contain_num))])]),a("div",{ref:e.name+s,refInFor:!0,staticClass:"button-box"},[a("router-link",{staticClass:"room-borrow",attrs:{to:"/allRooms/"+e.name}},[a("div",{staticClass:"borrow-svg"})]),a("div",{staticClass:"room-info",on:{click:function(s){t.delete_alert=!0,t.select_room_info=e}}},[a("div",{staticClass:"info-svg"})])],1)])])})),0)])},et=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"rule"},[s("div",[t._v(" 使用規範：test ")]),s("div",[t._v("教室器材：test")]),s("div",[t._v("教室狀態：test")])])}],st={name:"allRooms",data:function(){return{room_page:[{name:"test1",location:"test1",contain_num:"testNum"},{name:"test1",location:"test1",contain_num:"testNum"}],delete_alert:!1,select_room_info:{}}},computed:{},methods:Object(p["a"])(Object(p["a"])({},Object(g["b"])(["get_room_page"])),{},{openButton:function(t){this.$refs[t][0].style.display="flex"}}),created:function(){var t=this;return Object(A["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.$store.state.room.isLoading=!0,e.next=3,t.get_room_page();case 3:t.room_page=t.$store.state.room.roomPage,t.$store.state.room.isLoading=!1;case 5:case"end":return e.stop()}}),e)})))()}},at=st,it=(s("ac76"),Object(m["a"])(at,tt,et,!1,null,"632bb0b5",null)),nt=it.exports,ot=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"loginPage"},[a("div",{staticClass:"loginBox"},[a("div",[t._m(0),a("div",{staticClass:"line"}),!0===t.$store.state.room.isLoading?a("div",[a("img",{staticClass:"loading",attrs:{src:s("9b19"),alt:""}})]):t._e(),a("div",{staticClass:"google-login-text"},[t._v("使用GOOGLE帳號登入")])]),a("GoogleLogin",{staticClass:"login-container",attrs:{params:t.params,onSuccess:t.onSuccess,onFailure:t.onFailure}},[a("img",{staticClass:"login-button",attrs:{src:s("ebec"),alt:""}})])],1)])},rt=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"title-box"},[s("div",{staticClass:"logo"}),s("div",[s("div",{staticClass:"title-up"},[t._v("諮商與臨床心理學系")]),s("div",{staticClass:"title-down"},[t._v("教室借用系統")])])])}],ct=s("e571"),lt=s.n(ct),ut={name:"login",components:{GoogleLogin:lt.a},data:function(){return{incorrectAuth:!1,params:{client_id:"895240667973-qg6t46ve6ar1rjjdqh1ai5ha4gidsn2a.apps.googleusercontent.com"},renderParams:{width:250,height:50,longtitle:!0}}},methods:Object(p["a"])(Object(p["a"])({},Object(g["b"])(["Login","get_room_page"])),{},{onSuccess:function(t){var e=this;return Object(A["a"])(regeneratorRuntime.mark((function s(){return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return e.$store.state.room.isLoading=!0,s.next=3,e.Login(t);case 3:e.get_room_page();case 4:case"end":return s.stop()}}),s)})))()},onFailure:function(t){console.log(t)}}),created:function(){this.get_room_page()}},dt=ut,mt=(s("e490"),Object(m["a"])(dt,ot,rt,!1,null,"1c763154",null)),ht=mt.exports,vt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"background-canvas"},[s("div",{staticClass:"canvas-left"},[s("div",{staticClass:"box welcome"},[s("div",{staticClass:"hello-text"},[t._v("Hi， "+t._s(t.$store.state.room.tokens.user_name)+"！")]),s("div",{staticClass:" hello-text-second"},[t._v("歡迎來到教室借用系統！")]),s("div",{staticClass:"button-box"},[s("div",{staticClass:"welcome-button"},[s("router-link",{attrs:{to:"/allRooms"}},[t._v(" 教室借用 ")])],1),s("div",{staticClass:"welcome-button",on:{click:function(e){return t.question()}}},[t._v("使用說明")])])]),s("chat",{staticClass:"box function-box"}),s("record",{staticClass:"btn-block record"})],1),"pc"===t.$store.state.room.device?s("div",{staticClass:"box room-situation"},[t._v("敬請期待")]):t._e()])},_t=[],ft=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t.delete_alert?a("div",{staticClass:"modal-box"},[a("div",{staticClass:"alert-modal"},[a("img",{staticClass:"cancel",attrs:{src:s("f687"),alt:""},on:{click:function(e){t.delete_alert=!1}}}),a("div",{staticClass:"alert-content"},[a("div",{staticClass:"alert-title"},[t._v("確認取消借用？")]),a("div",{staticClass:"alert-text"}),a("div",{staticClass:"check-submit",on:{click:function(e){return t.cancelBorrow()}}},[t._v(" 確定取消！ ")])])])]):t._e(),"phone"===t.$store.state.room.device?a("div",{on:{click:function(e){t.show_modal=!0}}},[a("div",{staticClass:"record-svg"}),a("div",{staticClass:"button-text"},[t._v("借用紀錄")])]):t._e(),"phone"===t.$store.state.room.device?a("div",{directives:[{name:"show",rawName:"v-show",value:t.show_modal,expression:"show_modal"}],staticClass:"record-modal-box slide-top"},[a("div",{staticClass:"record-alert-modal"},[a("div",{staticClass:"record-alert-content"},[a("div",{staticClass:"navbar"},[a("div",{staticClass:"back-svg",on:{click:function(e){t.show_modal=!1}}}),a("div",[a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.search_text,expression:"search_text"}],attrs:{placeholder:"輸入關鍵字..."},domProps:{value:t.search_text},on:{input:function(e){e.target.composing||(t.search_text=e.target.value)}}})]),a("div",{staticClass:"button-box"},[a("div",{staticClass:"drop",on:{click:function(e){t.show_button=!t.show_button}}},[a("div",[t._v(" "+t._s(this.select_option[this.select_field])+" ")]),a("div",{staticClass:"drop-svg"})]),t.show_button?a("div",{staticClass:"drop-selection"},t._l(t.select_option,(function(e,s){return a("div",{key:s,on:{click:function(e){return t.field_search(s)}}},[t._v(" "+t._s(t.select_option[s])+" ")])})),0):t._e()])]),t._l(t.dataSearch,(function(e,i){return a("div",{key:i,ref:"box"+i,refInFor:!0,staticClass:"borrow-record-box",class:{"borrow-record-extend":t.target_index===i},on:{click:function(e){return t.showReason(i)}}},[a("div",{staticClass:"record-left"},[a("div",{staticClass:"borrow-record"},[a("div",{staticClass:"date-circle"},[a("div",{staticClass:"mobile-month"},[t._v(t._s(t.mobileBorrowDay(e.start_time).month))]),a("div",[t._v("/")]),a("div",{staticClass:"mobile-day"},[t._v(t._s(t.mobileBorrowDay(e.start_time).day))])]),a("div",{staticClass:"mobile-nav"},[a("div",{staticClass:"mobile-room"},[t._v(t._s(e.room))]),a("div",{staticClass:"mobile-time"},[t._v(t._s(t.borrowTime(e.start_time,e.end_time)))])])]),a("div",{directives:[{name:"show",rawName:"v-show",value:t.target_index===i,expression:"target_index === index"}],ref:i+"reason",refInFor:!0,staticClass:"mobile-reason"},[t._v(" 借用事由："+t._s(e.borrow_reason)+" ")])]),t.target_index===i&&"overtime"===t.recordStatus(e.start_time,e.end_time)?a("div",{staticClass:"mobile-edit-box"},[a("img",{attrs:{src:s("a9ee"),alt:""}})]):t._e(),t.target_index===i&&"undue"===t.recordStatus(e.start_time,e.end_time)?a("div",{ref:i+"cancel",refInFor:!0,staticClass:"mobile-edit-box",on:{click:function(s){return t.edit(e,i)}}},[a("div",{staticClass:"mobile-delete"}),a("div",[t._v("刪除")])]):t._e()])}))],2)])]):t._e(),"pc"===t.$store.state.room.device?a("div",[a("div",[a("table",{staticClass:"table-title"},[a("tr",[a("th",{on:{click:function(e){return t.selectSearchField("room")}}},[t._v("借用教室")]),a("th",{on:{click:function(e){return t.selectSearchField("borrow_reason")}}},[t._v("借用事由")]),a("th",{on:{click:function(e){return t.selectSearchField("start_time")}}},[t._v("借用日期")]),a("th",[t._v("借用時段")]),a("th",[t._v("狀態")])])])]),a("div",{staticClass:"table-box-content table-box"},[a("table",t._l(t.dataSearch,(function(e,i){return a("tr",{key:i},[a("td",{ref:"room",refInFor:!0},[t._v(t._s(e.room))]),a("td",{ref:"borrow_reason",refInFor:!0},[t._v(t._s(e.borrow_reason))]),a("td",{ref:"start_time",refInFor:!0},[t._v(t._s(t.borrowDay(e.start_time)))]),a("td",{ref:"time",refInFor:!0},[t._v(t._s(t.borrowTime(e.start_time,e.end_time)))]),a("td",{ref:"status",refInFor:!0},[a("div",{staticClass:"status-img"},["undue"===t.recordStatus(e.start_time,e.end_time)?a("img",{staticClass:"undue",attrs:{src:s("f356"),alt:""},on:{click:function(s){return t.edit(e)}}}):t._e(),"overtime"===t.recordStatus(e.start_time,e.end_time)?a("img",{attrs:{src:s("a9ee"),alt:""}}):t._e()])])])})),0)])]):t._e()])},pt=[],gt=(s("caad"),s("2532"),s("4d90"),{name:"Record",data:function(){return{select_delete_data:[],search_text:"",delete_alert:!1,cancel_index:"",show_modal:!1,target_index:"",show_button:!1,select_field:"room",select_option:{room:"搜教室",borrow_reason:"搜事由"}}},created:function(){var t=this;return Object(A["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.get_user_borrow_data(t.$store.state.room.tokens.user_email);case 2:console.log(t.$store.state.room.userData.data);case 3:case"end":return e.stop()}}),e)})))()},computed:{dataSearch:function(){var t=this;return""===this.search_text?this.$store.state.room.userData.data:(console.log(this.select_option[this.select_field]),this.$store.state.room.userData.data.filter((function(e){return e[t.select_field].includes(t.search_text)})))}},methods:Object(p["a"])(Object(p["a"])({},Object(g["b"])(["get_user_borrow_data","delete_user_borrow_data"])),{},{borrowDay:function(t){return t.split("T")[0]},mobileBorrowDay:function(t){return{month:(new Date(t).getMonth()+1).toString().padStart(2,0),day:new Date(t).getDate().toString().padStart(2,0)}},borrowTime:function(t,e){var s="".concat(new Date(t).getHours(),":").concat(new Date(t).getMinutes().toString().padEnd(2,0)),a="".concat(new Date(e).getHours(),":").concat(new Date(e).getMinutes().toString().padEnd(2,0));return"".concat(s," - ").concat(a)},recordStatus:function(t,e){var s=new Date,a=new Date(t);return s-a>0?"overtime":s-a<0?"undue":void 0},edit:function(t,e){this.cancel_index="box"+e,this.select_delete_data=t,this.delete_alert=!0},cancelBorrow:function(){var t=this;"phone"===this.$store.state.room.device&&this.$refs[this.cancel_index][0].classList.add("record-clear"),this.$store.state.room.userData.data=this.$store.state.room.userData.data.filter((function(e){return e.borrower===t.select_delete_data.borrower&&e.start_time!==t.select_delete_data.start_time&&e.end_time!==t.select_delete_data.end_time})),this.delete_user_borrow_data(this.select_delete_data),this.delete_alert=!1},selectSearchField:function(t){""!==this.select_field&&this.$refs[this.select_field].forEach((function(t){return t.classList.remove("select")})),this.select_field=t,this.$refs[this.select_field].forEach((function(t){return t.classList.add("select")}))},showReason:function(t){this.target_index===t?this.target_index="":this.target_index=t},field_search:function(t){this.select_field=t,this.show_button=!1}}),mounted:function(){}}),bt=gt,wt=(s("8544"),Object(m["a"])(bt,ft,pt,!1,null,"687a9f88",null)),Ct=wt.exports,xt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",{directives:[{name:"show",rawName:"v-show",value:"initial"===t.service,expression:"service === 'initial'"}],staticClass:"function-box-content"},[s("div",{staticClass:"chat-canvas",on:{click:function(e){return t.select_service("chat")}}},[s("div",{staticClass:"chat-svg"}),s("div",{staticClass:"chat-text"},[t._v("聯絡管理員")])])]),"phone"===t.$store.state.room.device?s("div",{directives:[{name:"show",rawName:"v-show",value:"chat"===t.service,expression:"service === 'chat'"}],staticClass:"modal-box slide-top"},[s("div",{staticClass:"alert-modal"},[s("div",{staticClass:"alert-content"},[s("div",{staticClass:"function-box-content"},[s("div",{staticClass:"chat-title"},[s("div",{staticClass:"back-svg",on:{click:function(e){return t.select_service("initial")}}}),s("div",{staticClass:"admin-photo"}),s("div",{staticClass:"admin-name"},[t._v("管理員")])]),s("div",{ref:"chat-content",staticClass:"chat-content"},t._l(t.textBox,(function(e,a){return s("div",{key:a},[s("div",{staticClass:"text-area"},[t._v(t._s(e))])])})),0)]),s("div",{staticClass:"chat-input"},[s("textarea",{directives:[{name:"model",rawName:"v-model",value:t.message,expression:"message"}],ref:"text-area",attrs:{placeholder:"輸入問題..."},domProps:{value:t.message},on:{keydown:[function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")||e.ctrlKey||e.shiftKey||e.altKey||e.metaKey?null:void e.preventDefault()},function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.send_message()}],input:function(e){e.target.composing||(t.message=e.target.value)}}}),s("div",{ref:"send",staticClass:"submit-svg",on:{click:function(e){return t.send_message()}}})])])])]):t._e(),"pc"===t.$store.state.room.device?s("div",{directives:[{name:"show",rawName:"v-show",value:"chat"===t.service,expression:"service === 'chat'"}],staticClass:"function-box-content slide-top"},[s("div",{staticClass:"chat-title"},[s("div",{staticClass:"back-svg",on:{click:function(e){return t.select_service("initial")}}}),s("div",{staticClass:"admin-photo"}),s("div",{staticClass:"admin-name"},[t._v("管理員")])]),s("div",{ref:"chat-content",staticClass:"chat-content"},t._l(t.textBox,(function(e,a){return s("div",{key:a},[s("div",{staticClass:"text-area"},[t._v(t._s(e))])])})),0),s("div",{staticClass:"chat-input"},[s("textarea",{directives:[{name:"model",rawName:"v-model",value:t.message,expression:"message"}],ref:"text-area",attrs:{placeholder:"輸入問題..."},domProps:{value:t.message},on:{keydown:[function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")||e.ctrlKey||e.shiftKey||e.altKey||e.metaKey?null:void e.preventDefault()},function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.send_message()}],input:function(e){e.target.composing||(t.message=e.target.value)}}}),s("div",{ref:"send",staticClass:"submit-svg",on:{click:function(e){return t.send_message()}}})])]):t._e()])},kt=[],yt={name:"chat",data:function(){return{message:"",textBox:[],service:"initial"}},methods:Object(p["a"])(Object(p["a"])({},Object(g["b"])(["send_message_to_admin"])),{},{select_service:function(t){this.service=t},send_message:function(t){var e=this;return Object(A["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(""!==e.message){t.next=2;break}return t.abrupt("return");case 2:return e.textBox.push(e.message),e.$refs["send"].classList.add("rotate"),e.$refs["text-area"].disabled=!0,t.next=7,e.send_message_to_admin(e.$store.state.room.tokens.user_name+"向管理員詢問："+e.message);case 7:e.$refs["send"].classList.remove("rotate"),e.$refs["text-area"].disabled=!1,e.message="";case 10:case"end":return t.stop()}}),t)})))()},scroll_to_bottom:function(){this.$refs["chat-content"].scrollTop=this.$refs["chat-content"].scrollHeight}}),updated:function(){this.scroll_to_bottom()}},Dt=yt,$t=(s("3aff"),Object(m["a"])(Dt,xt,kt,!1,null,"2bcbc676",null)),Ot=$t.exports,jt={name:"home",components:{record:Ct,chat:Ot},data:function(){return{}},methods:{question:function(){this.$store.state.room.showQuestion=!this.$store.state.room.showQuestion}}},St=jt,Rt=(s("ba0f"),Object(m["a"])(St,vt,_t,!1,null,"151b9fc4",null)),Et=Rt.exports,Bt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"error-page"},[s("div",{staticClass:"error-box"},[s("div",{staticClass:"error-text"}),s("div",{staticClass:"error-first-text"},[t._v("糟糕！似乎有地方出錯了！")]),s("div",{staticClass:"error-second-text"},[t._v("您的網址可能是錯誤的。")]),s("div",{staticClass:"to-home",on:{click:function(e){return t.go_home()}}},[t._v("點此返回主頁")])])])},Lt=[],Mt={name:"ErrorPage",methods:{go_home:function(){Ht.push("/home")}}},Tt=Mt,Nt=(s("ae89"),Object(m["a"])(Tt,Bt,Lt,!1,null,null,null)),Pt=Nt.exports,Ft=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("input",{directives:[{name:"model",rawName:"v-model",value:t.message,expression:"message"}],attrs:{type:"text"},domProps:{value:t.message},on:{input:function(e){e.target.composing||(t.message=e.target.value)}}})])},It=[],Xt={name:"testChat",data:function(){return{message:"",testsocket:""}},methods:{send:function(){this.testsocket.send(this.message),this.testsocket.onmessage=function(t){console.log("WS",t.data)}},close_socket:function(){this.testsocket.close()}},mounted:function(){this.testsocket=new WebSocket("ws://127.0.0.1:8000/ws/")}},Qt=Xt,qt=Object(m["a"])(Qt,Ft,It,!1,null,null,null),At=qt.exports;a["a"].use(I["a"]);var Ht=new I["a"]({baseUrl:"/",routes:[{path:"/",redirect:"/login"},{path:"/login",name:"login",component:ht},{path:"/allRooms",name:"allRooms",component:nt,meta:{needLogin:!0}},{path:"/allRooms/:id",name:"room",component:Z,meta:{needLogin:!0}},{path:"/record",name:"Record",component:Ct,meta:{needLogin:!0}},{path:"*",name:"ErrorPage",component:Pt},{path:"/home",name:"home",component:Et,meta:{needLogin:!0}},{path:"/testChat",name:"testChat",component:At}]}),Kt=s("b1e0"),Wt=s("4f76"),Gt=s.n(Wt),Jt=s("2106"),Yt=s.n(Jt),Ut={tokens:{accessToken:null,refreshToken:null,user_email:null,user_name:null},roomPage:[],roomData:[],userData:[],selectTime:null,isLoading:!1,homeService:"initial",device:"",showQuestion:!1},zt="https://borrowroombackend.herokuapp.com",Vt={},Zt={Login:function(t,e){var s=this;return Object(A["a"])(regeneratorRuntime.mark((function a(){var i;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return t.commit,s.state.room.isLoading=!0,i=e.getAuthResponse(e.getBasicProfile().getEmail()),localStorage.tokens=JSON.stringify({accessToken:i["access_token"],user_email:e.getBasicProfile().getEmail(),user_name:e.getBasicProfile().getName()}),a.next=6,r.a.post("".concat(zt,"/google/"),{token:i}).then((function(t){return console.log(t)}));case 6:Ht.push("/home");case 7:case"end":return a.stop()}}),a)})))()},get_room_page:function(t){var e=this;return Object(A["a"])(regeneratorRuntime.mark((function s(){return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return t.commit,s.next=3,r.a.get("".concat(zt,"/RoomModule/"),{params:{function:"get_room_page",access_token:e.state.room.tokens.access_token}}).then((function(t){e.state.room.roomPage=t.data}));case 3:case"end":return s.stop()}}),s)})))()},get_room_data:function(t,e){var s=this;return Object(A["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return t.commit,a.next=3,r.a.post("".concat(zt,"/RoomModule/"),{function:"get_room_data",room_name:e,access_token:s.state.room.tokens.accessToken}).then((function(t){t["data"]["error"]?(console.log(t["data"]),Ht.push("/*")):s.state.roomData=t.data}));case 3:case"end":return a.stop()}}),a)})))()},create_new_borrow:function(t,e){var s=this;return Object(A["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return t.commit,s.state.room.isLoading=!0,a.next=4,r.a.post("".concat(zt,"/RoomModule/"),{function:"create_new_borrow",data:e,access_token:s.state.room.tokens.accessToken}).then((function(t){t["data"]["error"]||alert("借用成功！請至主頁查看借用紀錄。")})).catch((function(t){alert("發生錯誤，請重新借用")}));case 4:Ht.push("/home");case 5:case"end":return a.stop()}}),a)})))()},get_user_borrow_data:function(t,e){var s=this;return Object(A["a"])(regeneratorRuntime.mark((function a(){var i;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return t.commit,i={user_name:e},s.state.room.isLoading=!0,a.next=5,r.a.post("".concat(zt,"/RoomModule/"),{function:"get_user_borrow_data",userInfo:i,access_token:s.state.room.tokens.accessToken}).then((function(t){s.state.room.userData=t,s.state.room.isLoading=!1}));case 5:case"end":return a.stop()}}),a)})))()},delete_user_borrow_data:function(t,e){var s=this;return Object(A["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return t.commit,a.next=3,r.a.post("".concat(zt,"/RoomModule/"),{function:"delete_user_borrow_data",data:e,access_token:s.state.room.tokens.accessToken}).then((function(t){return console.log(t)}));case 3:case"end":return a.stop()}}),a)})))()},send_message_to_admin:function(t,e){var s=this;return Object(A["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return t.commit,a.next=3,r.a.post("".concat(zt,"/RoomModule/"),{function:"send_line_notify",data:e,access_token:s.state.room.tokens.accessToken}).then((function(t){return console.log(t)}));case 3:case"end":return a.stop()}}),a)})))()},logout:function(){var t=this;return Object(A["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,localStorage.removeItem("tokens");case 2:t.state.room.isLoading=!1,Ht.push("/login");case 4:case"end":return e.stop()}}),e)})))()}},te={updateStorage:function(t,e){var s=e.access,a=e.refresh,i=e.email;t.tokens.accessToken=s,t.tokens.refreshToken=a,t.tokens.user_email=i},updateRoomData:function(t,e){t.roomData=e}},ee={state:Ut,getters:Vt,actions:Zt,mutations:te};a["a"].use(g["a"]);var se=new g["a"].Store({modules:{room:ee}}),ae=s("9483");Object(ae["a"])("".concat("","service-worker.js"),{ready:function(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered:function(){navigator.serviceWorker.register("service-worker.js").then((function(t){console.log(t)})),console.log("Service worker has been registered.")},cached:function(){console.log("Content has been cached for offline use.")},updatefound:function(){console.log("New content is downloading.")},updated:function(){console.log("New content is available; please refresh.")},offline:function(){console.log("No internet connection found. App is running in offline mode.")},error:function(t){console.error("Error during service worker registration:",t)}}),a["a"].use(Yt.a,r.a),a["a"].config.productionTip=!1,a["a"].use(Gt.a),a["a"].use(Kt["a"]),Ht.beforeEach((function(t,e,s){if(0===t.matched.length&&s({name:"login"}),localStorage.tokens&&(se.state.room.tokens=JSON.parse(localStorage.tokens)),t.matched.some((function(t){return t.meta.needLogin}))){var a="https://www.googleapis.com/oauth2/v2/userinfo?access_token=".concat(JSON.parse(localStorage.tokens).accessToken);r.a.get(a).then((function(t){200===t.status?s():(alert("連線已逾時，請重新登入"),localStorage.removeItem("tokens"),s({name:"login"}))})).catch((function(t){alert("連線已逾時，請重新登入"),console.log(t),s({name:"login"})}))}else s()})),new a["a"]({el:"#app",router:Ht,store:se,render:function(t){return t(F)}}).$mount("#app")},"5e72":function(t,e,s){t.exports=s.p+"img/whitelogo.03dd0ad1.svg"},"602e":function(t,e,s){"use strict";s("baa8")},"633d":function(t,e,s){"use strict";s("434c")},"828a":function(t,e,s){},8544:function(t,e,s){"use strict";s("828a")},"85ec":function(t,e,s){},"860e":function(t,e,s){},"8f74":function(t,e,s){},9476:function(t,e,s){},"9b19":function(t,e,s){t.exports=s.p+"img/logo.7f9d645e.svg"},"9bbc":function(t,e,s){"use strict";s("4b94")},a9ee:function(t,e,s){t.exports=s.p+"img/overtime.75d8eb17.svg"},ac76:function(t,e,s){"use strict";s("9476")},ae89:function(t,e,s){"use strict";s("c573")},b09e:function(t,e,s){},ba0f:function(t,e,s){"use strict";s("b09e")},baa8:function(t,e,s){},c573:function(t,e,s){},ce2a:function(t,e,s){t.exports=s.p+"img/step2.6bc621e7.png"},e145:function(t,e,s){t.exports=s.p+"img/step1.8b77e501.png"},e490:function(t,e,s){"use strict";s("080e")},ea8c:function(t,e,s){},ebec:function(t,e,s){t.exports=s.p+"img/login.dc843e90.svg"},f1bc:function(t,e,s){t.exports=s.p+"img/step3.cb848f41.png"},f1dd:function(t,e,s){"use strict";s("f332")},f332:function(t,e,s){},f356:function(t,e,s){t.exports=s.p+"img/undue.840a0c46.svg"},f5d1:function(t,e,s){t.exports=s.p+"img/testimg.35f62da4.jpg"},f687:function(t,e,s){t.exports=s.p+"img/cancel.273343cb.svg"}});
//# sourceMappingURL=app.2905e631.js.map